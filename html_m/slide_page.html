<!DOCTYPE html>
<html lang="ko" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <title>모바일</title>
    <link href="../css/style_m.css?ver=0.1" rel="stylesheet">
    <link href="../script/lib/jquery.bxslider.css" rel="stylesheet">
    <script src="../script/lib/jquery-3.4.1.min.js"></script>
    <script src="../script/lib/jquery-3.4.1.min.js"></script>
    <script src="../script/lib/jquery-ui.js"></script>
    <script src="../script/lib/jquery.bxslider.js"></script>
    <style type="text/css">

      .slide_page_wrap {width:100%; height:100%; overflow:hidden; position:relative;}
      .slide_page {height:100%; width:5000px; position:absolute; top:0; left:0;  transition:all 0.2s; }
      .item {float:left; height:100%; overflow:auto;}

      .item:nth-child(1) {background-color:red;}
      .item:nth-child(2) {background-color:green;}

    </style>
    <script type="text/javascript">


    function slidePage() {
      var width = $(document).width();
      var touchFlag = false;
      var startX, startY, endX, endY;
      var index = 0;
      var size = $(".slide_page_wrap .item").length -1;

      // width
      $(".slide_page_wrap .item").width(width);

      $(".slide_page_wrap").on("touchstart", function(e) {
        console.log("start");
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;

        touchFlag = true;

      });

      $(".slide_page_wrap").on("touchmove", function(e) {
        console.log("move");
        endX = e.touches[0].clientX;
        endY = e.touches[0].clientY;
        touchFlag = false;

      });

      $(".slide_page_wrap").on("touchend", function(e) {

        var resultX = startX - endX;
        var resultY = startY - endY;
        if(Math.abs(resultY) < 100 && Math.abs(resultX) > 50) {
          if(resultX>0 && index<size) {
            // left
            index++;
            movePage();
          }else if(resultX<0 && index > 0){
            // right
            index--;
            movePage();
          }
        }

        touchFlag = false;
        startX = 0;
        startY = 0;
        endX = 0;
        endY = 0;

      });


      function movePage() {
        var left = index * width *-1;
        $(".slide_page").css("left", left +"px");
      }

      function refresh() {
        width = $(document).width();
        $(".slide_page .item").width(width);
        movePage();
      }

      $(window).on("resize", function() {
        refresh();
      });

    }


    $(function(){

      slidePage();


    });
    </script>
  </head>
  <body>


    <div class="slide_page_wrap">
      <div class="slide_page">
        <div class="item">
          page1
          <div class="" style="height:1000px; background:yellow; width:100px;">

          </div>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
          test <br>
        </div>
        <div class="item">
          page2
        </div>
      </div>
    </div>









  </body>
</html>
